/* Do not edit this file to avoid losing your changes when upgrade the theme */
$.extend(!0,BT,{loadRecentViewedProductsSingle:function(t){if(void 0!==t&&0!=t.length){var i=this,n=t.find(".recent-view-list"),e=t.attr("data-handle"),o=(parseInt(t.attr("data-limit")),this.getCookieItemsValue(!0,this.options.recentView.cookieName)),a=o.indexOf(e);if(-1<a&&o.splice(a,1),0<o.length){o.reverse();var r=o.join(",");this.callAjax(theme.rootUrl,"GET",{view:"recent_view_slider",q:r},null,function(e){n.hasClass("slick-initialized")&&n.slick("unslick"),n.html(e),0<n.find(".grid__item").length&&(i.convertCurrencySilence(n.find("span.money")),i.applyCustomColorSwatches(n),i.initSlider(t,!1,!1),i.popularAddedWishlistItems(t))})}else n.remove(),t.append('<div class="alert alert-warning">'+theme.strings.recentViewEmpty+"</div>")}},sendRecommendationTrekkieEvent:function(e){if(window.ShopifyAnalytics&&window.ShopifyAnalytics.lib&&window.ShopifyAnalytics.lib.track){var t=e.find(".grid__item").length;window.ShopifyAnalytics.lib.track("Product Recommendations Displayed",{theme:Shopify.theme.name,didPageJumpOccur:!0,numberOfRecommendationsDisplayed:t})}},loadRecommendationProduct:function(o){var a=this;if(0<o.length){var e,t=o.attr("data-product-id"),i=o.attr("data-limit"),r=o.data("view");if(o.hasClass("loaded"))"recommendation"==r?((e=o.children(".cross-sell-list")).addClass(a.selectors.slider.useTouchMobile+" "+a.selectors.slider.default.replace(".","")),a.initSlider(o,!1,!1),a.initDealCountdown(e),a.popularAddedWishlistItems(e)):(e=o.parents(".freb__inner").first(),BTFreBought.init()),a.applyCustomColorSwatches(e);else a.callAjax(theme.recommendationUrl+".json","GET",{product_id:t,limit:i},"json",function(e){if(0<e.products.length){var i=[],n={};$.each(e.products,function(e,t){i.push(t.handle),n[t.handle]=t.url});var t=i.join(",");a.callAjax(theme.rootUrl,"GET",{view:r,q:t},null,function(e){var t;"recommendation"==r?((t=o.children(".cross-sell-list")).html(e),t.addClass(a.selectors.slider.useTouchMobile+" "+a.selectors.slider.default.replace(".","")),a.initSlider(o,!1,!1),a.initDealCountdown(t)):(t=o.parents(".freb__inner").first()).append(e),a.addRecommendationUrls(t,n),a.sendRecommendationTrekkieEvent(t),a.convertCurrencySilence(t.find("span.money")),a.applyCustomColorSwatches(t),a.reLoadReview(t),BTFreBought.init(),o.parent().find(".loading-not-full").remove()})}else o.hide()},function(){o.hide()})}},initStickyCartProductPage:function(){if(0<$(".sc").length){var o=this;$(".sc").removeClass("hide"),$(window).on(this.data.scrollEventName,function(e,t){if(o.data.pageLoaded&&0==BT.data.updatingProductOptions)if("down"==t){var i=$(".button--single-cart-main"),n=0<$(".sticky-menu.active").length?$(".sticky-menu").height():0;$(window).scrollTop()+n>i.offset().top?$(".sc").addClass("sc--active"):$(".sc").removeClass("sc--active")}else $(".sc").removeClass("sc--active")});var t=!1,i="sc__close--working";function n(){$(".sc__close").toggleClass(i),t=!1,$(".sc").toggleClass("open")}o.data.cacheWindowWidth<992?($(".sc__close").removeClass(i),$(".sc__inner").hide(),$(".sc").removeClass("open")):($(".sc__inner").show(),$(".sc").addClass("open")),$(".sc__close").on("click",function(e){e.preventDefault(),t||(t=!0,$(".sc__inner").toggle("slow",function(){$(".sc__close").toggleClass(i),t=!1,$(".sc").toggleClass("open")}))}),$(".sc__trigger").on("click touchend",function(e){if(e.preventDefault(),!t){t=!0;$(".sc").hasClass("open");$(".sc").hasClass("open")?$(".sc__inner").slideUp(300,n):$(".sc__inner").slideDown(300,n)}}),$(".qty-box__input--single").on("change",function(){var e=this;$(".qty-box__input--single").each(function(){$(this).is(e)||$(this).val($(e).val())})})}},alignReviewMasonryForm:function(){var e=$(".product-review-masonry");if(0<e.length){e.removeAttr("style");var t=$(".product-media-masonry-align"),i=t.offset().top+t.outerHeight()+20-e.offset().top;i<0&&e.css("margin-top",i+"px")}},initAlignReviewForm:function(){if(0<$(".product-review-masonry").length){this.alignReviewMasonryForm();var t=this;$(window).on(this.data.resizeEventName,function(e){setTimeout(function(){t.alignReviewMasonryForm()},300)})}},initTabAccordion:function(){$(document).on("click",".tab-accordion__trigger",function(e){if(e.preventDefault(),!$(this).hasClass("working")){$(this).addClass("working");var t=$(this),i=(t.parent().first().siblings(".nav-tabs"),$(t.attr("href")));t.toggleClass("open"),t.hasClass("open")?i.slideDown(300,function(){t.removeClass("working")}):i.slideUp(300,function(){t.removeClass("working")})}}),$(document).on("shown.bs.tab",'.tab-accordion-list a[data-toggle="tab"]',function(e){var t=$(e.target).attr("href"),i=$(t);i.addClass("open").show(),i.siblings('.tab-accordion__trigger[href="'+t+'"]').addClass("open")}),$(document).on("hidden.bs.tab",'.tab-accordion-list a[data-toggle="tab"]',function(e){var t=$(e.target).attr("href"),i=$(t);i.removeClass("open").hide(),i.siblings('.tab-accordion__trigger[href="'+t+'"]').removeClass("open")})},initSizeChart:function(){if(0<$(".sizechart-trigger").length){var r=this;$(".sizechart-trigger").unbind("click"),$(".sizechart-trigger").on("click",function(e){if(e.preventDefault(),$(this).hasClass("sizechart-trigger--inline")){var t=$(".sizechart-table"),i=t.parents(".tab-pane"),n=0;if(!i.hasClass(".active")){var o=i.attr("id");$('.nav-tab-item a[href="#'+o+'"]').trigger("click"),n=300}setTimeout(function(){var e=t.offset().top-80;0<$(".use-sticky").length&&(e-=60),e+="px",$("body,html").animate({scrollTop:e},800)},n)}else{var a=$(this).attr("data-modal-id");r.showPopup("#"+a)}})}0<$(".sizeChartModal .rte").length&&($(".sizeChartModal").removeClass("hide"),this.rteWrap(".sizeChartModal .rte"))}}),theme.productTemplate={},theme.ProductTemplateSection=function(e){var n=this.$container=$(e),o=this.sectionId=n.attr("data-section-id"),a=this.obj="#ProductSection-"+o,t=n.find(".product-single-json");if(0<t.length){var i=t.attr("data-handle");BT.data.productGroup[i]=$.parseJSON(t.html()),BT.addProductRecentView(i),BT.updateStorePickup(n.find(BT.selectors.productGroup.wrap).first(),BT.data.productGroup[i][t.attr("data-current-variant-id")])}BT.data.loadedSnippets.push("preload-product-single-general.scss");var r=BT.data.cacheWindowWidth<768?2e3:500;BT.initProductThumbsSlider(a),BT.initProductMainSliderAndZoom(a,2300,1500),BT.initDealCountdown(a),BT.applyCustomColorSwatches(a),setTimeout(function(){BT.initStickyCartProductPage(),0<$(".sc").length&&BT.applyCustomColorSwatches(".sc"),BT.rteWrap(a+" .rte");var e=$(".upsell-ele--single");0<e.length&&BT.initScrollingWindowTriggerOnce(e,"upsell_single",-170,function(){BT.loadUpsell(n.find(BT.selectors.upsell.wrap))});var t=$(".rencent-view-ele");0<t.length&&BT.initScrollingWindowTriggerOnce(t,"recent_view_single",-170,function(){BT.loadRecentViewedProductsSingle(t)});var i=$(".load-crossell");0<i.length?BT.loadRecommendationProduct(i):0<$(".freb__inner").length&&BTFreBought.init(),BT.initSizeChart(),BT.runProgressBar(n.find(".progress-bar")),0<$(".pg__review-stars--trigger").length&&($(".pg__review-stars--trigger").unbind("click"),$(".pg__review-stars--trigger").on("click",function(e){e.preventDefault();var t=$(".pg__review-form"),i=t,n=t.parents(".tab-pane");if(0<n.length){var o=n.attr("id");i=BT.data.cacheWindowWidth<991?$('.tab-accordion__trigger[href="#'+o+'"]'):$('.nav-tab-item a[href="#'+o+'"]'),n.hasClass(".active")||i.trigger("click")}if(!BT.isInViewport(i,window)){var a=i.offset().top-100;0<$(".use-sticky").length&&(a-=60),$("html, body").animate({scrollTop:a},400)}})),BT.init3dModel(this.$container,o)}.bind(this),r),theme.productTemplate[a]="#"+n.attr("id")},theme.ProductTemplateSection.prototype=_.assignIn({},theme.ProductTemplateSection.prototype,{onSelect:function(e){e.detail.load&&(BT.reLoadReview(this.obj),BT.alignReviewMasonryForm()),$(e.target).find(".product-single,.sc").removeAttr("data-history")},onBlockSelect:function(e){var t=$(e.target),i=$('a[href="#'+t.attr("id")+'"]');if(t.hasClass("active")||i.trigger("click"),!BT.isInViewport(i,e.currentTarget.defaultView)){var n=i.offset().top-100;$("html, body").animate({scrollTop:n},400)}},onUnload:function(){delete theme.productTemplate[this.obj],theme.ProductModel.removeSectionModels(this.sectionId)}}),BT.initAlignReviewForm(),BT.initTabAccordion(),theme.sections.constructors.product=theme.ProductTemplateSection;